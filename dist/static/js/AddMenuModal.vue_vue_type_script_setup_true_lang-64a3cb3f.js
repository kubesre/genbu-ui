import{_ as e}from"./index-0f9b6d49.js";import{d as l,g as a,l as d,N as t,r as u,o,e as n,w as c,a as r,u as m,f as s,E as i,H as p,eO as f,M as V}from"./index-5da0dba2.js";import{b as h,c as _}from"./index-0cb764db.js";const b=l({__name:"AddMenuModal",props:{menus:{}},setup(l,{expose:b}){const v=l,k=a(),y=a(""),x=a(!1),g=d((()=>y.value?"编辑菜单":"新增菜单")),U=a(!1),w=t({type:1,icon:"",svgIcon:"",title:"",sort:0,status:1,path:"",name:"",component:"",keepAlive:!1,hidden:!0,parentId:"",redirect:"",breadcrumb:!0,affix:!0}),I={title:[{required:!0,message:"请输入菜单标题"}],path:[{required:!0,message:"请输入路由地址"}],name:[{required:!0,message:"请输入组件名称"}],component:[{required:!0,message:"请输入组件路径"}],sort:[{required:!0,message:"请输入菜单排序"}]};b({add:()=>{y.value="",x.value=!0},edit:async e=>{y.value=e;const l=await h({id:e});Object.assign(w,l.data),f(w.path)&&(U.value=!0),x.value=!0}});const q=async()=>{try{return!!(await _(w)).data&&(V.success("模拟保存成功"),!0)}catch(e){return!1}};return(l,a)=>{const d=u("a-radio"),t=u("a-radio-group"),f=u("a-form-item"),V=u("a-tree-select"),h=u("a-input"),_=u("icon-question-circle-fill"),b=u("a-tooltip"),y=u("a-col"),A=e,j=u("a-row"),M=u("a-switch"),O=u("a-input-number"),z=u("a-form"),N=u("a-modal");return o(),n(N,{title:m(g),visible:m(x),"onUpdate:visible":a[16]||(a[16]=e=>p(x)?x.value=e:null),width:625,"mask-closable":!1,"unmount-on-close":"",onBeforeOk:q},{default:c((()=>[r(z,{ref_key:"FormRef",ref:k,model:m(w),rules:I,"auto-label-width":""},{default:c((()=>[r(f,{label:"菜单类型",field:"type"},{default:c((()=>[r(t,{modelValue:m(w).type,"onUpdate:modelValue":a[0]||(a[0]=e=>m(w).type=e),type:"button"},{default:c((()=>[r(d,{value:1},{default:c((()=>[s("目录")])),_:1}),r(d,{value:2},{default:c((()=>[s("菜单")])),_:1})])),_:1},8,["modelValue"])])),_:1}),r(f,{label:"上级菜单",field:"parentId"},{default:c((()=>[r(V,{modelValue:m(w).parentId,"onUpdate:modelValue":a[1]||(a[1]=e=>m(w).parentId=e),placeholder:"请选择上级菜单","allow-clear":"","allow-search":"",data:v.menus,fieldNames:{key:"id",title:"title",children:"children"}},null,8,["modelValue","data"])])),_:1}),r(j,{gutter:16},{default:c((()=>[r(y,{span:12},{default:c((()=>[r(f,{label:"自定义图标",field:"svgIcon"},{default:c((()=>[r(h,{modelValue:m(w).svgIcon,"onUpdate:modelValue":a[2]||(a[2]=e=>m(w).svgIcon=e),placeholder:"请输入菜单标题"},null,8,["modelValue"]),r(b,{content:"优先显示"},{default:c((()=>[r(_,{size:18,style:{color:"rgba(var(--warning-6))","margin-left":"8px"}})])),_:1})])),_:1})])),_:1}),r(y,{span:12},{default:c((()=>[r(f,{label:"菜单图标",field:"icon"},{default:c((()=>[r(A,{modelValue:m(w).icon,"onUpdate:modelValue":a[3]||(a[3]=e=>m(w).icon=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),r(f,{label:"菜单标题",field:"title"},{default:c((()=>[r(h,{modelValue:m(w).title,"onUpdate:modelValue":a[4]||(a[4]=e=>m(w).title=e),placeholder:"请输入菜单标题"},null,8,["modelValue"])])),_:1}),r(f,{label:"路由路径",field:"path"},{default:c((()=>[r(h,{modelValue:m(w).path,"onUpdate:modelValue":a[5]||(a[5]=e=>m(w).path=e),placeholder:"请输入路由地址"},null,8,["modelValue"])])),_:1}),1===m(w).type?(o(),n(f,{key:0,label:"重定向",field:"redirect"},{default:c((()=>[r(h,{modelValue:m(w).redirect,"onUpdate:modelValue":a[6]||(a[6]=e=>m(w).redirect=e),placeholder:"请输入重定向地址"},null,8,["modelValue"])])),_:1})):i("",!0),r(f,{label:"是否外链"},{default:c((()=>[r(t,{modelValue:m(U),"onUpdate:modelValue":a[7]||(a[7]=e=>p(U)?U.value=e:null),type:"button"},{default:c((()=>[r(d,{value:!0},{default:c((()=>[s("是")])),_:1}),r(d,{value:!1},{default:c((()=>[s("否")])),_:1})])),_:1},8,["modelValue"])])),_:1}),2===m(w).type?(o(),n(f,{key:1,label:"组件路径",field:"component"},{default:c((()=>[m(U)?(o(),n(h,{key:0,modelValue:m(w).component,"onUpdate:modelValue":a[8]||(a[8]=e=>m(w).component=e),placeholder:"请输入组件路径"},null,8,["modelValue"])):(o(),n(h,{key:1,modelValue:m(w).component,"onUpdate:modelValue":a[9]||(a[9]=e=>m(w).component=e),placeholder:"请输入组件路径"},{prepend:c((()=>[s("@/views/")])),append:c((()=>[s(".vue")])),_:1},8,["modelValue"]))])),_:1})):i("",!0),r(j,{gutter:16},{default:c((()=>[r(y,{span:8},{default:c((()=>[r(f,{label:"状态",field:"status"},{default:c((()=>[r(M,{type:"round",modelValue:m(w).status,"onUpdate:modelValue":a[10]||(a[10]=e=>m(w).status=e),"checked-value":1,"unchecked-value":0,"checked-text":"启用","unchecked-text":"禁用"},null,8,["modelValue"])])),_:1})])),_:1}),r(y,{span:8},{default:c((()=>[r(f,{label:"是否隐藏",field:"hidden"},{default:c((()=>[r(M,{type:"round",modelValue:m(w).hidden,"onUpdate:modelValue":a[11]||(a[11]=e=>m(w).hidden=e),"checked-value":!0,"unchecked-value":!1,"checked-text":"隐藏","unchecked-text":"显示"},null,8,["modelValue"])])),_:1})])),_:1}),r(y,{span:8},{default:c((()=>[r(f,{label:"是否缓存",field:"keepAlive"},{default:c((()=>[r(M,{type:"round",modelValue:m(w).keepAlive,"onUpdate:modelValue":a[12]||(a[12]=e=>m(w).keepAlive=e),"checked-value":!0,"unchecked-value":!1,"checked-text":"是","unchecked-text":"否"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),r(j,{gutter:16},{default:c((()=>[r(y,{span:8},{default:c((()=>[r(f,{label:"面包屑",field:"breadcrumb"},{default:c((()=>[r(M,{type:"round",modelValue:m(w).breadcrumb,"onUpdate:modelValue":a[13]||(a[13]=e=>m(w).breadcrumb=e),"checked-value":!0,"unchecked-value":!1,"checked-text":"显示","unchecked-text":"隐藏"},null,8,["modelValue"])])),_:1})])),_:1}),r(y,{span:8},{default:c((()=>[r(f,{label:"Tab栏",field:"affix"},{default:c((()=>[r(M,{type:"round",modelValue:m(w).affix,"onUpdate:modelValue":a[14]||(a[14]=e=>m(w).affix=e),"checked-value":!0,"unchecked-value":!1,"checked-text":"显示","unchecked-text":"隐藏"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),r(f,{label:"菜单排序",field:"sort"},{default:c((()=>[r(O,{modelValue:m(w).sort,"onUpdate:modelValue":a[15]||(a[15]=e=>m(w).sort=e),placeholder:"请输入菜单排序",min:1,mode:"button",style:{width:"120px"}},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["title","visible"])}}});export{b as _};

import{J as e,L as a,eF as t,eG as i,et as l,d as n,eD as o,G as s,eA as d,eH as c,g as u,z as r,eI as p,r as f,o as m,c as _,a as h,w as v,f as y,F as g,b as w,u as I,e as j,I as k,t as x,E as C,V as M,W as F,M as b,Q as L,i as T,p as N,j as B,h as R,_ as S}from"./index-5da0dba2.js";import{f as q,i as G}from"./file-map-2a15779f.js";import{a as V}from"./index.es-af785860.js";/* empty css               */import z from"./FileNavPath-012c1a38.js";import E from"./FileGrid-1a49c0fc.js";import J from"./FileList-bc836e27.js";import K from"./index-d5f77ee7.js";import P from"./index-d1f98e36.js";import{_ as Q}from"./index.vue_vue_type_script_setup_true_lang-f3d9f1e3.js";import $ from"./index-83497d58.js";import"./FileImg-acf04ddf.js";import"./FileRightMenu-09c39d05.js";function A(e,a){const n=document.createElement("div");document.body.appendChild(n);const o=t(e,{...a,onClose:()=>{setTimeout((()=>{o.unmount(),document.body.removeChild(n)}),350)}});o.use(i),o.use(l),o.mount(n)}const D=e=>(N("data-v-582848c3"),e=e(),B(),e),H={class:"file-main"},W=D((()=>R("span",null,"上传文件",-1))),O=D((()=>R("span",null,"上传文件夹",-1))),U=S(n({__name:"index",setup(t){var i;const l=o(),n=s(),{width:N}=d(),B=c(),R=u(!1),S=u([]),D=u("0");D.value=(null==(i=l.query.fileType)?void 0:i.toString())||"0";const U=async()=>{try{R.value=!0,X.value=!1;const i=await(t={fileType:D.value},e.get(`${a}/file/list`,t));S.value=i.data.list}catch(i){return i}finally{R.value=!1}var t};r((()=>{U()})),p((e=>{var a;e.query.fileType&&(D.value=null==(a=e.query.fileType)?void 0:a.toString(),U())}));const X=u(!1),Y=e=>{if(b.success(`点击了文件-${e.name}`),G.includes(e.extendName)&&e.src){const a=S.value.filter((e=>G.includes(e.extendName))).map((e=>e.src||"")),t=a.findIndex((a=>a===e.src));a.length&&V({options:{initialViewIndex:t},images:a})}"mp4"===e.extendName&&A(Q,{fileInfo:e}),"mp3"===e.extendName&&function(e){A($,{fileInfo:e})}(e)},Z=e=>{B.addSelectedFileItem(e)},ee=(e,a)=>{b.success("点击了"+e),"delete"===e&&L.warning({title:"提示",content:"是否删除该文件？",hideCancel:!1}),"rename"===e&&A(P,{fileInfo:a}),"move"===e&&function(e){A(K,{fileInfo:e})}(a),"detail"===e&&n.push({path:"/file/detail"})},ae=()=>{L.warning({title:"提示",content:"是否确认删除？",hideCancel:!1})};return(e,a)=>{const t=f("icon-upload"),i=f("a-button"),l=T,n=f("a-doption"),o=f("a-dropdown"),s=f("a-option"),d=f("a-select"),c=f("a-input"),u=f("icon-search"),r=f("a-input-group"),p=f("a-space"),b=f("icon-delete"),L=f("icon-select-all"),G=f("icon-swap"),V=f("a-tooltip"),K=f("icon-filter"),P=f("icon-apps"),Q=f("icon-list"),$=f("a-button-group"),A=f("a-row"),D=f("a-empty"),U=f("a-spin");return m(),_("div",H,[h(z),h(A,{justify:"space-between",class:"row-operate"},{default:v((()=>[h(p,null,{default:v((()=>[h(o,null,{content:v((()=>[h(n,null,{icon:v((()=>[h(l,{name:"upload-file"})])),default:v((()=>[W])),_:1}),h(n,null,{icon:v((()=>[h(l,{name:"upload-folder"})])),default:v((()=>[O])),_:1})])),default:v((()=>[h(i,{type:"primary",shape:"round"},{icon:v((()=>[h(t)])),default:v((()=>[y("上传")])),_:1})])),_:1}),h(r,null,{default:v((()=>[h(d,{style:{width:"150px"},placeholder:"请选择"},{default:v((()=>[(m(!0),_(g,null,w(I(q),(e=>(m(),j(s,{key:e.value},{icon:v((()=>[(m(),j(k(e.icon),{size:"18",color:"#999"}))])),default:v((()=>[y(x(e.name),1)])),_:2},1024)))),128))])),_:1}),h(c,{placeholder:"请输入关键词...","allow-clear":""}),h(i,{type:"primary"},{icon:v((()=>[h(u)])),default:v((()=>[y("搜索")])),_:1})])),_:1})])),_:1}),I(N)>715?(m(),j(p,{key:0},{default:v((()=>[I(X)?(m(),j(i,{key:0,disabled:!I(B).selectedFileIdList.length,type:"primary",status:"danger",onClick:ae},{icon:v((()=>[h(b)])),_:1},8,["disabled"])):C("",!0),h(i,{type:"primary",onClick:a[0]||(a[0]=e=>X.value=!I(X))},{icon:v((()=>[h(L)])),default:v((()=>[y(x(I(X)?"取消批量":"批量操作"),1)])),_:1}),h($,null,{default:v((()=>[h(V,{content:"传输列表",position:"bottom"},{default:v((()=>[h(i,{onClick:a[1]||(a[1]=e=>R.value=!I(R))},{icon:v((()=>[h(G)])),_:1})])),_:1}),h(V,{content:"排序",position:"bottom"},{default:v((()=>[h(i,null,{icon:v((()=>[h(K)])),_:1})])),_:1}),h(V,{content:"视图",position:"bottom"},{default:v((()=>[h(i,{onClick:I(B).changeViewMode},{icon:v((()=>["grid"===I(B).viewMode?(m(),j(P,{key:0})):(m(),j(Q,{key:1}))])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})):C("",!0)])),_:1}),h(U,{class:"file-wrap",loading:I(R)},{default:v((()=>[M(h(E,{data:I(S),isBatchMode:I(X),selectedFileIdList:I(B).selectedFileIdList,onClick:Y,onCheck:Z,onRightMenuClick:ee},null,8,["data","isBatchMode","selectedFileIdList"]),[[F,I(S).length&&"grid"==I(B).viewMode]]),M(h(J,{data:I(S),isBatchMode:I(X),onClick:Y,onRightMenuClick:ee},null,8,["data","isBatchMode"]),[[F,I(S).length&&"list"==I(B).viewMode]]),M(h(D,null,null,512),[[F,!I(S).length]])])),_:1},8,["loading"])])}}}),[["__scopeId","data-v-582848c3"]]);export{U as default};

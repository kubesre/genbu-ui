import{u as e}from"./useDept-ca9253a3.js";import{d as a,g as l,l as t,N as d,r as s,o,e as u,w as n,a as i,u as r,H as m,M as c}from"./index-5da0dba2.js";import{g as p,s as f}from"./index-0cb764db.js";const h=a({__name:"AddDeptModal",setup(a,{expose:h}){const V=l(""),v=l(!1),b=t((()=>V.value?"编辑部门":"新增部门")),{deptList:w,getDeptList:g}=e();g();const x=d({id:"",parentId:"",name:"",sort:0,status:1,description:""}),_={name:[{required:!0,message:"请输入部门名称"},{min:3,max:10,message:"长度在 3 - 10个字符"}]};h({add:()=>{V.value="",v.value=!0},edit:async e=>{w.value.length||await g(),V.value=e;const a=await p({id:e});Object.assign(x,a.data),v.value=!0}});const k=async()=>{try{return!!(await f(x)).data&&(c.success("模拟保存成功"),!0)}catch(e){return!1}};return(e,a)=>{const l=s("a-tree-select"),t=s("a-form-item"),d=s("a-input"),c=s("a-input-number"),p=s("a-textarea"),f=s("a-switch"),h=s("a-form"),V=s("a-modal");return o(),u(V,{visible:r(v),"onUpdate:visible":a[5]||(a[5]=e=>m(v)?v.value=e:null),title:r(b),"mask-closable":!1,onBeforeOk:k},{default:n((()=>[i(h,{ref:"formRef",model:r(x),rules:_,size:"medium","auto-label-width":""},{default:n((()=>[i(t,{label:"上级部门",name:"parentId"},{default:n((()=>[i(l,{modelValue:r(x).parentId,"onUpdate:modelValue":a[0]||(a[0]=e=>r(x).parentId=e),"allow-clear":"",data:r(w),placeholder:"请选择",fieldNames:{key:"id",title:"name",children:"children"}},null,8,["modelValue","data"])])),_:1}),i(t,{label:"部门名称",field:"name","validate-trigger":["change","input"]},{default:n((()=>[i(d,{modelValue:r(x).name,"onUpdate:modelValue":a[1]||(a[1]=e=>r(x).name=e),placeholder:"请输入部门名称","allow-clear":""},null,8,["modelValue"])])),_:1}),i(t,{label:"排序",field:"sort"},{default:n((()=>[i(c,{modelValue:r(x).sort,"onUpdate:modelValue":a[2]||(a[2]=e=>r(x).sort=e),style:{width:"120px"}},null,8,["modelValue"])])),_:1}),i(t,{label:"描述",field:"description"},{default:n((()=>[i(p,{modelValue:r(x).description,"onUpdate:modelValue":a[3]||(a[3]=e=>r(x).description=e),"max-length":200,placeholder:"请输入描述","auto-size":{minRows:3},"show-word-limit":""},null,8,["modelValue"])])),_:1}),i(t,{label:"状态",field:"status"},{default:n((()=>[i(f,{type:"round",modelValue:r(x).status,"onUpdate:modelValue":a[4]||(a[4]=e=>r(x).status=e),"checked-value":1,"unchecked-value":0,"checked-text":"正常","unchecked-text":"禁用"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["visible","title"])}}});export{h as _};
